## 目录
* [别名Aliases](#别名Aliases)
* [类自动加载](#类自动加载)

# 别名Aliases
别名是底层BaseYii提供的功能，涉及到的函数都是静态的，Yii类与BaseYii的关系是继承关系，源码为
```
class Yii extends \yii\BaseYii
{
}
```
可以设置别名，如
```
Yii::setAlias("@a","aaaa");
Yii::setAlias("@a/b","aaaa/bbb");
Yii::setAlias("@c","@a/u");
```
涉及的方法为
```
public static function setAlias($alias, $path)
{
    //可见第一个参数是否是@开头无所谓，即使没有@开头也会被强制加上
    if (strncmp($alias, '@', 1)) {
        $alias = '@' . $alias;
    }
    $pos = strpos($alias, '/');
    $root = $pos === false ? $alias : substr($alias, 0, $pos);
    if ($path !== null) {  //创建别名操作
        //别名的值是否还包含别名
        $path = strncmp($path, '@', 1) ? rtrim($path, '\\/') : static::getAlias($path);
        //如果要创建的别名不存在
        if (!isset(static::$aliases[$root])) {
            if ($pos === false) {
                static::$aliases[$root] = $path;
            } else {
                static::$aliases[$root] = [$alias => $path];
            }
        } elseif (is_string(static::$aliases[$root])) {  //要创建的别名存在
            if ($pos === false) {
                static::$aliases[$root] = $path;
            } else {
                static::$aliases[$root] = [
                    $alias => $path,
                    $root => static::$aliases[$root],
                ];
            }
        } else {  //要创建的别名存在
            static::$aliases[$root][$alias] = $path;
            krsort(static::$aliases[$root]);
        }
    } elseif (isset(static::$aliases[$root])) {   //删除别名操作
        if (is_array(static::$aliases[$root])) {
            unset(static::$aliases[$root][$alias]);
        } elseif ($pos === false) {
            unset(static::$aliases[$root]);
        }
    }
}
```
根据源码，如
```
Yii::setAlias("@ab","abc");
Yii::setAlias("@ab/x","123");
var_dump(Yii::$aliases);
```
首先会创建一个@ab的别名，值为abc；
```
array (size=1)
  '@ab' => string 'abc' (length=3)
```
然后存入$ab/x别名，底层的会将存@ab的结构改为数组
```
array (size=1)
  '@ab' => 
    array (size=2)
      '@ab/x' => string '123' (length=3)
      '@ab' => string 'abc' (length=3)
```
# 类自动加载
